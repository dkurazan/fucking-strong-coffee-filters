{{ 'collection.css' | asset_url | stylesheet_tag }}

<div class="collection">
    <div class="container">
        <div class="product__sort">
            <div class="filter__title" id="filter-open-button">
                <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0151 7.0625H3C2.68934 7.0625 2.4375 6.81066 2.4375 6.5C2.4375 6.18934 2.68934 5.9375 3 5.9375H10.0151C10.26 5.07181 11.0559 4.4375 12 4.4375C12.9441 4.4375 13.74 5.07181 13.9849 5.9375H15C15.3107 5.9375 15.5625 6.18934 15.5625 6.5C15.5625 6.81066 15.3107 7.0625 15 7.0625H13.9849C13.74 7.92819 12.9441 8.5625 12 8.5625C11.0559 8.5625 10.26 7.92819 10.0151 7.0625ZM11.0625 6.5C11.0625 5.98223 11.4822 5.5625 12 5.5625C12.5178 5.5625 12.9375 5.98223 12.9375 6.5C12.9375 7.01777 12.5178 7.4375 12 7.4375C11.4822 7.4375 11.0625 7.01777 11.0625 6.5Z" fill="#EB2240"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.98486 13.0625H15C15.3107 13.0625 15.5625 12.8107 15.5625 12.5C15.5625 12.1893 15.3107 11.9375 15 11.9375H7.98486C7.74002 11.0718 6.94408 10.4375 6 10.4375C5.05592 10.4375 4.25999 11.0718 4.01514 11.9375H3C2.68934 11.9375 2.4375 12.1893 2.4375 12.5C2.4375 12.8107 2.68934 13.0625 3 13.0625H4.01514C4.25999 13.9282 5.05592 14.5625 6 14.5625C6.94408 14.5625 7.74002 13.9282 7.98486 13.0625ZM5.0625 12.5C5.0625 11.9822 5.48223 11.5625 6 11.5625C6.51777 11.5625 6.9375 11.9822 6.9375 12.5C6.9375 13.0178 6.51777 13.4375 6 13.4375C5.48223 13.4375 5.0625 13.0178 5.0625 12.5Z" fill="#EB2240"/>
                </svg>
                <h4>
                    Filter
                    <span>
                        {% assign sum = 0 %}
                        {%- for filter in collection.filters -%}
                            {% assign values_size = filter.active_values.size %}
                            {% assign sum = sum | plus: values_size %}
                        {% endfor %}
                        ({{ sum }})
                    </span>
                </h4>
            </div>
            <div class="product-sort__inner">
                <span>Sort:</span>
                <select id="sort-by">
                    {% assign sort_by = collection.sort_by | default: collection.default_sort_by %}

                    {% for option in collection.sort_options %}
                        <option value="{{ option.value }}" {% if option.value == sort_by %}selected="selected"{% endif %}>
                            {{ option.name }}
                        </option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="row">
            <div class="collection__filter filter__popup">
                <form class="filter-form">
                    <div class="collection__filter-inner">
                        <div class="filter-popup-title">
                            <div>
                                <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0151 7.0625H3C2.68934 7.0625 2.4375 6.81066 2.4375 6.5C2.4375 6.18934 2.68934 5.9375 3 5.9375H10.0151C10.26 5.07181 11.0559 4.4375 12 4.4375C12.9441 4.4375 13.74 5.07181 13.9849 5.9375H15C15.3107 5.9375 15.5625 6.18934 15.5625 6.5C15.5625 6.81066 15.3107 7.0625 15 7.0625H13.9849C13.74 7.92819 12.9441 8.5625 12 8.5625C11.0559 8.5625 10.26 7.92819 10.0151 7.0625ZM11.0625 6.5C11.0625 5.98223 11.4822 5.5625 12 5.5625C12.5178 5.5625 12.9375 5.98223 12.9375 6.5C12.9375 7.01777 12.5178 7.4375 12 7.4375C11.4822 7.4375 11.0625 7.01777 11.0625 6.5Z" fill="#EB2240"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.98486 13.0625H15C15.3107 13.0625 15.5625 12.8107 15.5625 12.5C15.5625 12.1893 15.3107 11.9375 15 11.9375H7.98486C7.74002 11.0718 6.94408 10.4375 6 10.4375C5.05592 10.4375 4.25999 11.0718 4.01514 11.9375H3C2.68934 11.9375 2.4375 12.1893 2.4375 12.5C2.4375 12.8107 2.68934 13.0625 3 13.0625H4.01514C4.25999 13.9282 5.05592 14.5625 6 14.5625C6.94408 14.5625 7.74002 13.9282 7.98486 13.0625ZM5.0625 12.5C5.0625 11.9822 5.48223 11.5625 6 11.5625C6.51777 11.5625 6.9375 11.9822 6.9375 12.5C6.9375 13.0178 6.51777 13.4375 6 13.4375C5.48223 13.4375 5.0625 13.0178 5.0625 12.5Z" fill="#EB2240"/>
                                </svg>
                                <h4>Filter</h4>
                            </div>
                            <svg id="filter-close-button" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.286 20.7142L20.7141 11.2861" stroke="#6B6B6B" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M11.286 11.2858L20.7141 20.7139" stroke="#6B6B6B" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </div>
                        {%- for filter in collection.filters -%}
                            <div class="filter__block">
                                <div class="filter__block-title">
                                    <h6>{{ filter.label }}</h6>
                                    <div class="filter__button">
                                        <svg width="9" height="2" viewBox="0 0 9 2" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <line y1="1" x2="9" y2="1" stroke="#6C7175"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="filter__checkboxes">
                                    {%- for filter_value in filter.values -%}
                                        <div class="filter__checkbox">
                                            <div>
                                                <input type="checkbox"
                                                    name="{{ filter_value.param_name }}"
                                                    value="{{ filter_value.value }}"
                                                    id="Filter-{{ filter.param_name }}-{{ forloop.index }}"
                                                    {% if filter_value.active -%}checked{%- endif %}
                                                    {% if filter_value.count == 0 and filter_value.active == false -%}disabled{%- endif %}
                                                >
                                                <label for="Filter-{{ filter.param_name }}-{{ forloop.index }}">{{ filter_value.label }}</label>
                                            </div>
                                            <span>
                                               {{ filter_value.count }}
                                            </span>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                        <button class="filter__apply-button">Apply filters</button>
                    </div>
                </form>
            </div>
    
            <div class="collection__products">
                {% paginate collection.products by 9 %}
                    <div class="collection__products-inner">
                        <style>
                            {% if section.settings.icnons-and-labels == 1 %}
                                .product-card__icons li:last-child, .product-card__icons li:nth-child(2) {
                                    display: none;
                                }

                                .product-card__icons ul{
                                    justify-content: center;
                                }
                            {% elsif section.settings.icnons-and-labels == 2 %}
                                .product-card__icons li:nth-child(3){
                                    display: none;
                                }

                                .product-card__icons li{
                                    min-width: auto;
                                    max-width: 50%;
                                }
                            {% elsif section.settings.icnons-and-labels == 3 %}

                            {% endif %}
                        </style>
                        {% for product in collection.products %}
                            {%  render 'product-card', product: product %}
                        {% endfor %}
                    </div>  
                    <div class="collection__pagination">
                        {% if paginate.pages > 1 %}
                            <nav>
                                {% if paginate.previous.url %}
                                    <a href="{{ paginate.previous.url }}">{{ paginate.previous.title }}</a>
                                {% endif %}
                                
                                {% for part in paginate.parts %}
                                     {% if part.is_link %}
                                        <a href="{{ part.url }}">{{ part.title }}</a>
                                    {% else %}
                                        <span>{{ part.title }}</span>
                                     {% endif %}
                                {% endfor %}

                                {% if paginate.next.url %}
                                    <a href="{{ paginate.next.url }}">{{ paginate.next.title }}</a>
                                {% endif %}
                            </nav>
                        {% endif %}
                    </div>
                {% endpaginate %}
            </div>
        </div>
    </div>
</div>
<div class="overlay"></div>

{% schema %}
    {
        "name": "Tempalte",
        "settings": [
            {
                "type": "checkbox",
                "id": "hide-product-subtitle",
                "label": "Hide product subtitle",
                "default": false
            },
            {
                "type": "range",
                "id": "icnons-and-labels",
                "min": 1,
                "max": 3,
                "step": 1,
                "default": 3,
                "label": "How many icons and labels you want to display under title?"
            }
        ]
    }
{% endschema %}